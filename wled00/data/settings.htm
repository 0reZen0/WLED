<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
	<title>Settings</title>
	<script>
		function GetCurrent()
		{
			nocache = "&nocache=" + Math.random() * 1000000;
			var request = new XMLHttpRequest();
			request.onreadystatechange = function()
			{
				if (this.readyState == 4) {
					if (this.status == 200) {
						if (this.responseXML != null) {
							document.Settings_form.CSSID.value = this.responseXML.getElementsByTagName('cssid')[0].innerHTML;
							document.Settings_form.CPASS.value = this.responseXML.getElementsByTagName('cpass')[0].innerHTML; //fake pass like ******
							document.Settings_form.CMDNS.value = this.responseXML.getElementsByTagName('cmdns')[0].innerHTML;
							document.Settings_form.APSSID.value = this.responseXML.getElementsByTagName('apssid')[0].innerHTML;
							document.Settings_form.APHSSID.checked = (this.responseXML.getElementsByTagName('aphssid')[0].innerHTML)!=0?true:false;
							document.Settings_form.APPASS.value = this.responseXML.getElementsByTagName('appass')[0].innerHTML; //fake pass like ******
							document.Settings_form.APCHAN.value = this.responseXML.getElementsByTagName('apchan')[0].innerHTML;
							document.getElementsByClassName("sip")[0].innerHTML = this.responseXML.getElementsByTagName('sip')[0].innerHTML;
							document.getElementsByClassName("sip")[1].innerHTML = this.responseXML.getElementsByTagName('sip')[1].innerHTML;
							document.getElementsByClassName("msg")[0].innerHTML = this.responseXML.getElementsByTagName('msg')[0].innerHTML;
						}
					}
				}
			}
			// send HTTP request
			request.open("GET", "get-settings/" + nocache, true);
			request.send(null);
		}
		function OpenMain()
		{
			window.open("/","_self");
		}
	</script>
	<style>
	body {
		line-height: 150%;
	}
	</style>
</head>
<body onload="GetCurrent()" class=" __plain_text_READY__">
	Und nein, ich mache die Einstellungsseite nicht Deutsch ;D <br>
	<h1>WLED Settings</h1>
	<form id="form_s" name="Settings_form" action="set-settings" method="post">
		<input type="submit" name="SUBM" value="Save">
		<input type="button" name="BACK" value="Back" onclick="OpenMain()">
		<h2>WiFi setup</h2>
		<h3>Connect to existing network</h3>
		Network SSID (leave empty to not connect): <br> <input type="text" name="CSSID" maxlength="32"> <br>
		Network password: <br> <input type="password" name="CPASS" maxlength="63"> <br>
		mDNS address (leave empty for no mDNS): <br/>
		http:// <input type="text" name="CMDNS" maxlength="32"> .local <br>
		Client IP: <span class="sip"> Not connected </span> <br>
		<h3>Configure Access Point</h3>
		AP SSID (leave empty for no AP): <br> <input type="text" name="APSSID" maxlength="32"> <br>
		Hide AP SSID: <input type="checkbox" name="APHSSID" value="0"> <br>
		AP password (leave empty for open): <br> <input type="password" name="APPASS" maxlength="63"> <br>
		AP channel: <input type="text" name="APCHAN" maxlength="2" size="2"> <br>
		AP IP: <span class="sip"> Not active </span> <br>
		
		<h2>Application setup</h2>
		<h3>LED setup</h3>
		The default boot LED color is the current color when settings are saved. <br>
		<h3>Security</h3>
		Factory reset: <input type="checkbox" name="RESET" value="0"> <br>
		All EEPROM content (settings) will be erased. <br> <br>
		
		HTTP traffic is not encrypted. An attacker in the same network could intercept form data!<br>
		<h3>About</h3>
		WLED version 0.2 <br>
		(c) 2016 Christian Schwinne <br>
		Server message: <span class="msg"> XML response error! </span>
		<br><br>
		<input type="submit" name="SUBM" value="Save">
		<input type="button" name="BACK" value="Back" onclick="OpenMain()">
	</form>
</body>
</html>